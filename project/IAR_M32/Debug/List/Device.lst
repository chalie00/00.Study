###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.30.1.53127/W32 for ARM     28/Jul/2022  15:50:37 #
# Copyright 1999-2011 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\TTT\Desktop\zz.STDFW\00.Study\src\Device.c      #
#    Command line =  C:\Users\TTT\Desktop\zz.STDFW\00.Study\src\Device.c -D   #
#                    USE_STDPERIPH_DRIVER -D STM32F10x_HD -D USE_FULL_ASSERT  #
#                    -lcN C:\Users\TTT\Desktop\zz.STDFW\00.Study\project\IAR_ #
#                    M32\Debug\List\ -lb C:\Users\TTT\Desktop\zz.STDFW\00.Stu #
#                    dy\project\IAR_M32\Debug\List\ -o                        #
#                    C:\Users\TTT\Desktop\zz.STDFW\00.Study\project\IAR_M32\D #
#                    ebug\Obj\ --no_cse --no_unroll --no_inline               #
#                    --no_code_motion --no_tbaa --no_clustering               #
#                    --no_scheduling --debug --endian=little --cpu=Cortex-M3  #
#                    -e --fpu=None --dlib_config "C:\Program Files (x86)\IAR  #
#                    Systems\Embedded Workbench 6.0\arm\INC\c\DLib_Config_Ful #
#                    l.h" -I C:\Users\TTT\Desktop\zz.STDFW\00.Study\project\I #
#                    AR_M32\..\..\inc\ -I C:\Users\TTT\Desktop\zz.STDFW\00.St #
#                    udy\project\IAR_M32\..\..\Libraries\CMSIS\CM3\DeviceSupp #
#                    ort\ST\STM32F10x\ -I C:\Users\TTT\Desktop\zz.STDFW\00.St #
#                    udy\project\IAR_M32\..\..\Libraries\STM32F10x_StdPeriph_ #
#                    Driver\inc\ -I "C:\Program Files (x86)\IAR               #
#                    Systems\Embedded Workbench 6.0\arm\inc\c\" -On -I        #
#                    "C:\Program Files (x86)\IAR Systems\Embedded Workbench   #
#                    6.0\arm\CMSIS\Include\"                                  #
#    List file    =  C:\Users\TTT\Desktop\zz.STDFW\00.Study\project\IAR_M32\D #
#                    ebug\List\Device.lst                                     #
#    Object file  =  C:\Users\TTT\Desktop\zz.STDFW\00.Study\project\IAR_M32\D #
#                    ebug\Obj\Device.o                                        #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\TTT\Desktop\zz.STDFW\00.Study\src\Device.c
      1          
      2          #include "Device.h"
      3          #include "Common.h"
      4          
      5          /*******************************************************************************
      6          * TYPE DEFINE STRUCTURE
      7          *******************************************************************************/
      8          USART_InitTypeDef USART_InitStructure;
      9          NVIC_InitTypeDef NVIC_InitStructure;
     10          GPIO_InitTypeDef GPIO_InitStructure;
     11          TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;
     12          TIM_OCInitTypeDef TIM_OCInitStructure;
     13          EXTI_InitTypeDef EXTI_InitStructure;
     14          DMA_InitTypeDef DMA_InitStructure;
     15          ADC_InitTypeDef ADC_InitStructure;
     16          RCC_ClocksTypeDef rcc_clocks;
     17          I2C_InitTypeDef	I2C_InitStructure;
     18          
     19          void I2C_Configuration(void);
     20          
     21          uint16_t PrescalerValue = 0;
     22          
     23          
     24          /*******************************************************************************
     25          * Divece Initialization
     26          *******************************************************************************/
     27          void Initial_Device(void)
     28          {
     29             RCC_Configuration();
     30             RCC_GetClocksFreq(&rcc_clocks);
     31             GPIO_Configuration();
     32          
     33             //TIMER_Init();
     34             //NVIC_Configuration();
     35             //EXTI_Configuration();
     36          }
     37          
     38          
     39          /*******************************************************************************
     40          * Function : TIMER_Init
     41          *******************************************************************************/
     42          void TIMER_Init(void)
     43          {
     44             uint16_t	period;
     45             period = (SystemCoreClock / 1200 ) - 1;
     46             PrescalerValue = (uint16_t) (SystemCoreClock / 120000);
     47          
     48             //TIM4 (CH3): GPIOB 8 LED Green
     49             //TIM4 (CH4): GPIOB 9 LED Red
     50          
     51             TIM_TimeBaseStructure.TIM_Period = 3600 - 1;
     52             TIM_TimeBaseStructure.TIM_Prescaler = 60000 - 1;
     53             TIM_TimeBaseStructure.TIM_ClockDivision = 0;
     54             TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;
     55             //TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;
     56             TIM_TimeBaseInit(TIM4, &TIM_TimeBaseStructure);
     57          
     58             TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Disable;
     59             TIM_OC1Init(TIM4, &TIM_OCInitStructure);
     60             TIM_OC2Init(TIM4, &TIM_OCInitStructure);
     61          
     62             TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable;
     63             TIM_OCInitStructure.TIM_Pulse = 1;
     64             TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High;
     65             TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_Toggle;
     66             TIM_OC3Init(TIM4, &TIM_OCInitStructure);
     67             TIM_Cmd(TIM4, ENABLE);
     68          
     69             TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable;
     70             TIM_OCInitStructure.TIM_Pulse = 1;
     71             TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_Low;
     72             TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_Toggle;
     73             TIM_OC4Init(TIM4, &TIM_OCInitStructure);
     74             TIM_Cmd(TIM4, ENABLE);
     75          
     76          
     77          }
     78          
     79          /*******************************************************************************
     80          * Function : RCC_Configuration
     81          *******************************************************************************/
     82          void RCC_Configuration(void)
     83          {
     84             SystemInit();
     85          
     86             /* GPIOx clock enable */
     87             RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB | RCC_APB2Periph_GPIOC | RCC_APB2Periph_GPIOD | RCC_APB2Periph_AFIO, ENABLE);
     88          
     89             /* TIM clock enable */
     90             RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4, ENABLE);
     91          
     92          
     93          }
     94          
     95          /*******************************************************************************
     96          * Function : NVIC_Configuration
     97          *******************************************************************************/
     98          void NVIC_Configuration(void)
     99          {
    100          
    101             NVIC_InitStructure.NVIC_IRQChannel = EXTI0_IRQn;
    102             NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
    103             NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
    104             NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
    105             NVIC_Init(&NVIC_InitStructure);
    106          
    107             NVIC_InitStructure.NVIC_IRQChannel = EXTI1_IRQn;
    108             NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
    109             NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
    110             NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
    111             NVIC_Init(&NVIC_InitStructure);
    112          
    113          }
    114          
    115          /*******************************************************************************
    116          * Function : GPIO_Configuration
    117          *******************************************************************************/
    118          void GPIO_Configuration(void)
    119          {
    120          
    121             //GPIOA Pin 0: Set The WKUP SW Of Mango B'd
    122             GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;
    123             GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPD;
    124             GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;
    125             GPIO_Init(GPIOA, &GPIO_InitStructure);
    126          
    127             //GPIOA Pin 1: Set The UserKey SW Of Mango B'd
    128             GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1;
    129             GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPD;
    130             GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;
    131             GPIO_Init(GPIOA, &GPIO_InitStructure);
    132          
    133             //GPIOB Pin5: Yellow, Pin8: Green, Pin9: Red
    134             GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9 | GPIO_Pin_8 | GPIO_Pin_5;
    135             GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
    136             GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;
    137             GPIO_Init(GPIOB, &GPIO_InitStructure);
    138          
    139          	//GPIOC SevenSeg
    140          	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_1 | GPIO_Pin_2 | GPIO_Pin_3 | GPIO_Pin_4 |
    141          								  GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7 | GPIO_Pin_8;
    142          	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
    143          	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
    144              GPIO_Init(GPIOC, &GPIO_InitStructure);
    145          
    146          }
    147          
    148          void EXTI_Configuration(void){
    149          	EXTI_InitStructure.EXTI_Line = EXTI_Line0;
    150          	EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;
    151          	EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;
    152          	EXTI_InitStructure.EXTI_LineCmd = ENABLE;
    153          	EXTI_Init(&EXTI_InitStructure);
    154          
    155          	EXTI_InitStructure.EXTI_Line = EXTI_Line1;
    156              EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;
    157          	EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;
    158          	EXTI_InitStructure.EXTI_LineCmd = ENABLE;
    159          	EXTI_Init(&EXTI_InitStructure);
    160          
    161          }
    162          
    163          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
        8  EXTI_Configuration
             8 -> EXTI_Init
        8  GPIO_Configuration
             8 -> GPIO_Init
        8  Initial_Device
             8 -> GPIO_Configuration
             8 -> RCC_Configuration
             8 -> RCC_GetClocksFreq
        8  NVIC_Configuration
             8 -> NVIC_Init
        8  RCC_Configuration
             8 -> RCC_APB1PeriphClockCmd
             8 -> RCC_APB2PeriphClockCmd
             8 -> SystemInit
        8  TIMER_Init
             8 -> TIM_Cmd
             8 -> TIM_OC1Init
             8 -> TIM_OC2Init
             8 -> TIM_OC3Init
             8 -> TIM_OC4Init
             8 -> TIM_TimeBaseInit


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable4
       4  ??DataTable4_1
       4  ??DataTable4_10
       4  ??DataTable4_11
       4  ??DataTable4_12
       4  ??DataTable4_2
       4  ??DataTable4_3
       4  ??DataTable4_4
       4  ??DataTable4_5
       4  ??DataTable4_6
       4  ??DataTable4_7
       4  ??DataTable4_8
       4  ??DataTable4_9
      20  ADC_InitStructure
      44  DMA_InitStructure
      64  EXTI_Configuration
       8  EXTI_InitStructure
     112  GPIO_Configuration
       4  GPIO_InitStructure
      16  I2C_InitStructure
      18  Initial_Device
      64  NVIC_Configuration
       4  NVIC_InitStructure
       2  PrescalerValue
      24  RCC_Configuration
     172  TIMER_Init
      16  TIM_OCInitStructure
      12  TIM_TimeBaseStructure
      16  USART_InitStructure
      20  rcc_clocks

 
 162 bytes in section .bss
 506 bytes in section .text
 
 506 bytes of CODE memory
 162 bytes of DATA memory

Errors: none
Warnings: 1
